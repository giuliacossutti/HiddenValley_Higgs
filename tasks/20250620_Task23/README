Author: Giulia Cossutti
Date: 20th June 2025
Task: Task23

Run obtained with ht-condor
condor_submit file.sub
condor_q
condor_transfer_data ProcessID

Ht-condor files:
- In /gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250521_Task20/
500K_signal_EJ.sh
500K_signal_EJ.sub
500K_bkg_Zjets_q.sh
500K_bkg_Zjets_q.sub
500K_bkg_Zjets_g.sh
500K_bkg_Zjets_g.sub
500K_bkg_ZZ.sh
500K_bkg_ZZ.sub
500K_bkg_HZ_SM.sh
500K_bkg_HZ_SM.sub
- In /gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250527_Task21/
2M_bkg_Zjets_q.sh
2M_bkg_Zjets_q.sub
2M_bkg_Zjets_g.sh
2M_bkg_Zjets_g.sub

Description:
- Studies on signal and bkgs by filling histograms of signal and 4 bkg and then stacking and merging.
  Signal area = sum of Z+jets bkgs areas.
  All plots in root files to be used for figure of merit and best cuts' determination.
  A preselection on events is applied:
  - At least 2 small jets
  - 2 charged leptons with same flavour, opposite charge, | mll - mZ | < 10 GeV, ZpT > 20 GeV
  Events are divided in 2 categories:
  - A: 1 Large Jet
  - B: >= 2 Large Jets
  Selection after Cut2 is applied:
  - >= 1 Large Jet (to fit in category A or B)
  - >= 1 b-tagged Small Jets (Cut1)
  - A: DeltaR between first 2 small jets < 2.2
  - B: DeltaR between first 2 small jets < 4.8
- Calculation of figures of merit (significance S/sqrt(Bkg) for different cuts) to determine best cuts for cut-based analysis.
  Tested second cut to exclude Z+jets background in event cathegory A and B.
- Count of number of events passing selection after Cut3.

Pythia8 card file:
Obtained through
makepythia8cards.sh
in
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250521_Task20/
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250527_Task21/
from
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_signal_EJ.cmnd
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_bkg_Zjets_q.cmnd
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_bkg_Zjets_g.cmnd
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_bkg_ZZ.cmnd
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_bkg_HZ_SM.cmnd
as 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/pythia8_cards/*
/gfsvol01/atlas/giuliac/condor/20250527_Task21/pythia8_cards/*

Delphes card file:
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/delphes_cards/delphes_card_ATLAS_Reclustering_Unique.tcl

Data file:
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_signal_EJ_#.root (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_bkg_Zjets_q_#.root (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_bkg_Zjets_g_#.root (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_bkg_ZZ_#.root (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_bkg_HZ_SM_#.root (1 <= # <= 10)
/eos/infnts/atlas/giuliac/condor/20250527_Task21/root_outputs/50K_bkg_Zjets_q_#.root (11 <= # <= 50) 
/eos/infnts/atlas/giuliac/condor/20250527_Task21/root_outputs/50K_bkg_Zjets_g_#.root (11 <= # <= 50)

Log file:
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_signal_EJ_#.log (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_bkg_Zjets_q_#.log (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_bkg_Zjets_g_#.log (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_bkg_ZZ_#.log (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_bkg_HZ_SM_#.log (1 <= # <= 10)
/eos/infnts/atlas/giuliac/condor/20250527_Task21/log_outputs/50K_bkg_Zjets_q_#.root (11 <= # <= 50) 
/eos/infnts/atlas/giuliac/condor/20250527_Task21/log_outputs/50K_bkg_Zjets_g_#.root (11 <= # <= 50)

Condor output files:
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_signal_EJ_job_#.out (.log, .err) (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_bkg_Zjets_q_job_#.out (.log, .err) (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_bkg_Zjets_g_job_#.out (.log, .err) (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_bkg_ZZ_job_#.out (.log, .err) (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_bkg_HZ_SM_job_#.out (.log, .err) (1 <= # <= 10)
/eos/infnts/atlas/giuliac/condor/20250527_Task21/condor_out/50K_bkg_Zjets_q_job_#.out (.log, .err) (11 <= # <= 50) 
/eos/infnts/atlas/giuliac/condor/20250527_Task21/condor_out/50K_bkg_Zjets_g_job_#.out (.log, .err) (11 <= # <= 50)

Analysis files:
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250620_Task23/BuildHistos.C
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250620_Task23/MergeHistosArea_Zjets.C
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250620_Task23/FigureOfMerit.C
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250620_Task23/BuildHistos_afterCutZjets.C

***
Files from the various samples are distinguished by a tag: signal_EJ, bkg_Zjets_q, bkg_Zjets_g, bkg_ZZ, bkg_HZ_SM
'''
If area_Zjets_ contain:
_sample0 : signal
_sample1 : bkg_Zjets_g
_sample2 : bkg_Zjets_q
'''
Two series of 1D plots were made:
*.pdf : stack of backgrounds + overlapped signal
*_stack.pdf : stack of backgrounds and signal
'''
If they contain:
area_Zjets_ : produced by MergeHistosArea_Zjets.C, Signal area = sum of Z+jets bkgs areas
'''
If filenames end with:
_signal_bkg_left : plots of fraction of signal and bkg events remaining after the cut
'''
If they contain:
A_ : category A
B_ : category B
Cut3 : study for the third cut
***

Plot files:
/gfsvol01/atlas/giuliac/plots_and_outputs/20250620_Task23/*.root
/gfsvol01/atlas/giuliac/plots_and_outputs/20250620_Task23/MergedHistos.root
/gfsvol01/atlas/giuliac/plots_and_outputs/20250620_Task23/*.pdf

Source of FOM histograms, from 20250620_Task23:
- signal_EJ.root : all histos from signal
- bkg_Zjets_q.root : all histos from Z+(jet from q) background
- bkg_Zjets_g.root : all histos from Z+(jet from g) background
Produced through them, used for figure of merit and best cuts' determination:
- area_Zjets_MergedHistos.root
Inside this file, names of signal histos end with _0, bkg histos 
end with _1 (bkg_Zjets_g) and _2 (bkg_Zjets_q).

Plots:
From MergeHistosArea_Zjets.C :
====== 1D plots =========
- DeltaRS.pdf : DeltaR between leading and subleading small jets
- Nbsmall.pdf : Number of btagged small jets
- Lep2PT.pdf : pT of sum of 2 leptons reconstructed as products of Z decay
====== 2D plots =========
- Ns_Nbs.pdf : number of small vs b-tagged small jets

From FigureOfMerit.C :
====== 1D plots =========
- Zjets_fom_DeltaR_between_leading_and_subleading_small_jets.pdf : significance with 1D cuts on DeltaR between first 2 small jets
- Zjets_fom_number_of_btagged_small_jets.pdf : significance with 1D cuts on NbSmall
- Zjets_fom_pt_of_first_two_leptons.pdf : significance with 1D cuts on pT of sum of leptons from Z decay
====== 2D plots =========
- Zjets_Rectangular_fom_Nsmall_vs_Nbsmall.pdf : significance with 2D rectangular cuts on number of small and b-tagged small jets

Significance, signal, bkg values are in text files Zjets_FOM.txt, with same names as the pdf plots.

Count of events passing selection after Cut3:
- afterCutZjets.txt
