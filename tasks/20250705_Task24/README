Author: Giulia Cossutti
Date: 5th July 2025
Task: Task24

Run obtained with ht-condor
condor_submit file.sub
condor_q
condor_transfer_data ProcessID

Ht-condor files:
- In /gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250521_Task20/
500K_signal_EJ.sh
500K_signal_EJ.sub
500K_bkg_Zjets_q.sh
500K_bkg_Zjets_q.sub
500K_bkg_Zjets_g.sh
500K_bkg_Zjets_g.sub
500K_bkg_ZZ.sh
500K_bkg_ZZ.sub
500K_bkg_HZ_SM.sh
500K_bkg_HZ_SM.sub
- In /gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250527_Task21/
2M_bkg_Zjets_q.sh
2M_bkg_Zjets_q.sub
2M_bkg_Zjets_g.sh
2M_bkg_Zjets_g.sub

Description:
- Studies on signal and bkgs by filling histograms of signal and 4 bkg and then stacking and merging.
  Signal area = sum of all bkgs areas.
  Signal area = sum of ZZ, SM HZ bkgs areas.
  All plots in root files to be used for figure of merit and best cuts' determination.
  A preselection on events is applied:
  - At least 2 small jets
  - 2 charged leptons with same flavour, opposite charge, | mll - mZ | < 10 GeV, ZpT > 20 GeV
  2 categories of events:
  - A: Events with 1 Large Jet
  - B: Events with >=2 Large Jets
  Cut1 is applied (number of b-tagged small jets >= 1) for both A and B events.
  Cut2 is applied:
  - A: DeltaR between first 2 small jets < 2.2
  - B: DeltaR between first 2 small jets < 4.8
  Cut3 is applied:
  - A: pT of sum of 2 leptons by Z decay > 96 GeV/c
  Cut4 is applied:
  - A: DeltaR between first 2 small jets <= -0.09 * mjj of first 2 small jets + 8.5
  - B: ECF2/pT of Leading Large Jet > 2 GeV/c

- Final plots and number of surviving events after Cut4.
- Plots to see the impact of possible Cut5. Cut5 excluded. 
- Final signal region choice.

Pythia8 card file:
Obtained through
makepythia8cards.sh
in
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250521_Task20/
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250527_Task21/
from
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_signal_EJ.cmnd
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_bkg_Zjets_q.cmnd
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_bkg_Zjets_g.cmnd
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_bkg_ZZ.cmnd
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/pythia8_cards/condor_bkg_HZ_SM.cmnd
as 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/pythia8_cards/*
/gfsvol01/atlas/giuliac/condor/20250527_Task21/pythia8_cards/*

Delphes card file:
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/delphes_cards/delphes_card_ATLAS_Reclustering_Unique.tcl

Data file:
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_signal_EJ_#.root (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_bkg_Zjets_q_#.root (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_bkg_Zjets_g_#.root (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_bkg_ZZ_#.root (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/root_outputs/50K_bkg_HZ_SM_#.root (1 <= # <= 10)
/eos/infnts/atlas/giuliac/condor/20250527_Task21/root_outputs/50K_bkg_Zjets_q_#.root (11 <= # <= 50) 
/eos/infnts/atlas/giuliac/condor/20250527_Task21/root_outputs/50K_bkg_Zjets_g_#.root (11 <= # <= 50)

Log file:
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_signal_EJ_#.log (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_bkg_Zjets_q_#.log (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_bkg_Zjets_g_#.log (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_bkg_ZZ_#.log (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/log_outputs/50K_bkg_HZ_SM_#.log (1 <= # <= 10)
/eos/infnts/atlas/giuliac/condor/20250527_Task21/log_outputs/50K_bkg_Zjets_q_#.root (11 <= # <= 50) 
/eos/infnts/atlas/giuliac/condor/20250527_Task21/log_outputs/50K_bkg_Zjets_g_#.root (11 <= # <= 50)

Condor output files:
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_signal_EJ_job_#.out (.log, .err) (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_bkg_Zjets_q_job_#.out (.log, .err) (1 <= # <= 10) 
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_bkg_Zjets_g_job_#.out (.log, .err) (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_bkg_ZZ_job_#.out (.log, .err) (1 <= # <= 10)
/gfsvol01/atlas/giuliac/condor/20250521_Task20/condor_out/50K_bkg_HZ_SM_job_#.out (.log, .err) (1 <= # <= 10)
/eos/infnts/atlas/giuliac/condor/20250527_Task21/condor_out/50K_bkg_Zjets_q_job_#.out (.log, .err) (11 <= # <= 50) 
/eos/infnts/atlas/giuliac/condor/20250527_Task21/condor_out/50K_bkg_Zjets_g_job_#.out (.log, .err) (11 <= # <= 50)

Analysis files:
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250705_Task24/BuildHistos.C
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250705_Task24/MergeHistosArea.C
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250705_Task24/MergeHistosArea_ZZHZ.C
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250705_Task24/FigureOfMerit.C
/gfsvol01/atlas/giuliac/HiddenValley_Higgs/tasks/20250705_Task24/FigureOfMerit_final.C

***
Files from the various samples are distinguished by a tag: signal_EJ, bkg_Zjets_q, bkg_Zjets_g, bkg_ZZ, bkg_HZ_SM
'''
If they contain:
_sample0 : signal
_sample1 : bkg_HZ_SM
_sample2 : bkg_ZZ
_sample3 : bkg_Zjets_g
_sample4 : bkg_Zjets_q
'''
Two series of 1D plots were made:
*.pdf : stack of backgrounds + overlapped signal
*_stack.pdf : stack of backgrounds and signal
'''
If they contain:
area_ : produced by MergeHistosArea.C, Signal area = sum of bkgs areas
area_ZZHZ_ : produced by MergeHistosArea_ZZHZ.C, Signal area = sum of ZZ, SM HZ bkgs areas
***

Source of FOM histograms, from 20250705_Task24:
- signal_EJ.root : all histos from signal
- bkg_ZZ.root : all histos from ZZ background
- bkg_HZ_SM.root : all histos from SM HZ background
Produced through them, used for figure of merit and best cuts' determination:
- area_ZZHZ_MergedHistos.root
Inside this file, names of signal histos end with _0, bkg histos 
end with _1 (bkg_HZ_SM) and _2 (bkg_ZZ).


Plot files:
/gfsvol01/atlas/giuliac/plots_and_outputs/20250705_Task24/*.root
/gfsvol01/atlas/giuliac/plots_and_outputs/20250705_Task24/MergedHistos.root
/gfsvol01/atlas/giuliac/plots_and_outputs/20250705_Task24/*.pdf

Plots:
====== 1D plots =========
- InvMass_small.pdf : Invariant mass of first 2 small jets
- InvMass_large.pdf : Invariant mass of first 2 large jets
- InvMass_allb.pdf : Invariant mass of all b-tagged jets (if >= 2 b-tagged jets in the event)
- DeltaRS.pdf : DeltaR between leading and subleading small jets
- DeltaPhiS.pdf : DeltaPhi between leading and subleading small jets
- DeltaRL.pdf : DeltaR between leading and subleading large jets
- DeltaPhiL.pdf : DeltaPhi between leading and subleading large jets
- JetPT1S.pdf : pT of leading small jet
- JetPT2S.pdf : pT of subleading small jet
- JetPT1L.pdf : pT of leading large jet
- JetPT2L.pdf : pT of subleading large jet
- NConst1.pdf : Number of constituents of leading large jet
- NConst2.pdf : Number of constituents of subleading large jet
- Nsmall.pdf : Number of small jets
- Nbsmall.pdf : Number of btagged small jets
- Nlarge.pdf : Number of large jets
- PTF1S.pdf : Prompt Track Fraction of leading small jet (DeltaR = 0.5)
- PTF2S.pdf : Prompt Track Fraction of subleading small jet (DeltaR = 0.5)
- PTF1bS.pdf : Prompt Track Fraction of leading btagged small jet (DeltaR = 0.5)
- PTF1L.pdf : Prompt Track Fraction of leading large jet
- PTF2L.pdf : Prompt Track Fraction of subleading large jet
- ECF1L.pdf : 2point Energy Correlation Function/pT of leading large jet
- ECF2L.pdf : 2point Energy Correlation Function/pT of subleading large jet
- ECF1S.pdf : 2point Energy Correlation Function/pT of leading small jet
- ECF2S.pdf : 2point Energy Correlation Function/pT of subleading small jet
- Lep2PT.pdf : pT of sum of 2 leptons reconstructed as products of Z decay
- LepDeltaR.pdf : DeltaR between 2 leptons reconstructed as products of Z decay
====== 2D plots =========
- IMs_DRs.pdf : Invariant mass vs DeltaR of first 2 small jets
- IMl_DRl.pdf : Invariant mass vs DeltaR of first 2 large jets
- PTF1bS_PTF1L.pdf : Prompt Track Fraction of leading btagged small jet vs leading large jet
- PTF1S_PTF1L.pdf : Prompt Track Fraction of leading small jet vs leading large jet
- PTF1S_PTF2S.pdf : Prompt Track Fraction of leading vs subleading small jet

==== FOM plots ====
ZZHZ_Cut5_*.pdf : 1D and 2D tried cuts, with plots of significance, signal and bkg left. 
Significance, signal, bkg values are in text files ZZHZ_Cut5_FOM.txt, with same names as the pdf plots.

=== Count of events passing selection after Cut4 ===
- afterCut4.txt

===== Final signal region choice =====
FinalSignalRegion_*.pdf : signal region on PTF1S_PTF2S plane
Significance, signal, bkg values are in text files FinalSignalRegion_FOM.txt, with same names as the pdf plots.
